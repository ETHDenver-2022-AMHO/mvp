"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.formatSkylink = exports.convertSkylinkToBase32 = void 0;
const base64_js_1 = __importDefault(require("base64-js"));
const base32_encode_1 = __importDefault(require("base32-encode"));
const url_1 = require("../utils/url");
/**
 * Converts the given base64 skylink to base32.
 *
 * @param skylink - The base64 skylink.
 * @returns - The converted base32 skylink.
 */
function convertSkylinkToBase32(skylink) {
    const decoded = base64_js_1.default.toByteArray(skylink.padEnd(skylink.length + 4 - (skylink.length % 4), "="));
    return base32_encode_1.default(decoded, "RFC4648-HEX", { padding: false }).toLowerCase();
}
exports.convertSkylinkToBase32 = convertSkylinkToBase32;
/**
 * Formats the skylink by adding the sia: prefix.
 *
 * @param skylink - The skylink.
 * @returns - The formatted skylink.
 */
function formatSkylink(skylink) {
    if (skylink == "") {
        return skylink;
    }
    if (!skylink.startsWith(url_1.uriSkynetPrefix)) {
        skylink = `${url_1.uriSkynetPrefix}${skylink}`;
    }
    return skylink;
}
exports.formatSkylink = formatSkylink;
