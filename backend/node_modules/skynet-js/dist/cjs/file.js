"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getJSON = void 0;
const tweak_1 = require("./mysky/tweak");
const skydb_1 = require("./skydb");
const validation_1 = require("./utils/validation");
async function getJSON(userID, path, customOptions) {
    validation_1.validateString("userID", userID, "parameter");
    validation_1.validateString("path", path, "parameter");
    validation_1.validateOptionalObject("customOptions", customOptions, "parameter", skydb_1.defaultGetJSONOptions);
    const opts = {
        ...skydb_1.defaultGetJSONOptions,
        ...this.customOptions,
        ...customOptions,
    };
    const dataKey = tweak_1.deriveDiscoverableTweak(path);
    opts.hashedDataKeyHex = true; // Do not hash the tweak anymore.
    return await this.db.getJSON(userID, dataKey, opts);
}
exports.getJSON = getJSON;
